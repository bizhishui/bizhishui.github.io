---
title: Sed & awk
layout: post
guid: urn:uuid:1f6f3a24-f0a3-4b90-abff-a79d92eca8a8
categories:
  - linux
tags:
  - sed
  - awk
---

> This is a note blog for *sed* and *awk*, adapted from [sed & awk](http://docstore.mik.ua/orelly/unix/sedawk/index.htm).

* TOC
{:toc}

#### Understanding Basic Operations
Sed is stream-oriented, it cannot be used interactively. By default, all of the input to sed passes through and goes to standard output. 
The input file itself is not changed. *Sed applies a command* without an address *to every line in the file* (global-line addressing).  
For example

```
    s/regular/complex/   #subsitute every lines contain regular by complex
```

Awk was developed as a programmable editor that, like sed, is stream-oriented and interprets a script of editing commands. 
Where awk departs from sed is in discarding the line-editor command set. It offers in its place a programming language modeled on the C language. 
The print statement replaces the p command, for example. The concept of addressing is carried over, such that:

```
    /regular/ {print }
```

prints those lines matching "regular". The braces ({}) surround a series of one or many statements that applied to the same address.

One of the most distinctive features of awk is that it parses, or breaks up, each input line and makes individual words available for processing with a script.

#### Command-Line Syntax
{:.no_toc}
Sed and awk are invoked in much the same way with command-line syntax:

```
    command [options] script filename
```

The *script must be surround in single quotes if it contains a space or any characters that may be interpreted by the shell*. One option common
to both sed and awk is the *-f* option that allows your to specify the name of a script file. As a script grows in size, it is convenient to place
it in a file. With scriptfile, each program reads one input line at a time from the input file, makes a copy of the input line, and 
executes the instructions specified in the script on that copy. Thus the command is 

```
    command -f scriptfile filename
```

In sed and awk, each instruction has two parts: a *pattern* and a *procedure*. The pattern is a regular expression delimited with slashed (/).
A procedure specifies one or more actions to be performed.  
As each line of input is read, the program reads the first instruction in the script and checks the pattern against the current line. 
If there is no match, the procedure is ignored and the next instruction is read. If there is a match, then the action or actions specified in the procedure are followed. 
All of the instructions are read, not just the first instruction that matches the input line.  
When all the applicable instructions have been interpreted and applied for a single line, sed outputs the line and repeats the cycle for each input line. 
Awk, on the other hand, does not automatically output the line; the instructions in your script control what is finally done with it.

```
    #command-line options for sed and examples
    -e      Editing instruction follows                 #sed -e 's/ MA/, Massachusetts/' -e 's/ PA/, Pennsylvania/' list.txt
    -f      Filename of script follows                  #sed -f sedscr list.txt
    -n      Suppress automatic output of input lines    # only affected streams are output
```

#### Using awk
{:.no_toc}
